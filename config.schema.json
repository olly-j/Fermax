{
  "pluginAlias": "FermaxBluePlatform",
  "pluginType": "platform",
  "singular": true,
  "headerDisplay": "Fermax Blue / DuoxMe Video Doorbell Integration",
  "footerDisplay": "Connect your Fermax VEO-XS WiFi doorbell to HomeKit with doorbell notifications, lock control, and live video streaming.",
  "schema": {
    "type": "object",
    "properties": {
      "_step1": {
        "title": "Step 1: Fermax Account Credentials",
        "type": "string",
        "default": "",
        "description": "Enter your Fermax Blue / DuoxMe account details that you use to control your doorbell from the mobile app.",
        "readonly": true
      },
      "username": {
        "title": "Fermax Username (Email)",
        "type": "string",
        "placeholder": "your-email@example.com",
        "description": "The email address you use to log into the Fermax Blue or DuoxMe mobile app.",
        "required": true,
        "format": "email"
      },
      "password": {
        "title": "Fermax Password",
        "type": "string",
        "format": "password",
        "description": "Your Fermax Blue / DuoxMe account password. This is stored securely in your Homebridge config.",
        "required": true
      },
      "_step2": {
        "title": "Step 2: Firebase Cloud Messaging (FCM) Settings",
        "type": "string",
        "default": "",
        "description": "Fermax uses Firebase Cloud Messaging to send doorbell ring notifications. Extract the Sender ID from the Fermax Blue app (iOS or Android).",
        "readonly": true
      },
      "senderId": {
        "title": "Firebase Sender ID (Project Number)",
        "type": "string",
        "placeholder": "123456789012",
        "description": "Extract from Fermax Blue app:\n• iOS: Find GoogleService-Info.plist, look for GCM_SENDER_ID or project_number\n• Android: Unzip APK, find google-services.json, copy project_number field\nThis is typically a 10-12 digit number. See README for detailed extraction steps for both iOS and Android.",
        "required": true,
        "pattern": "^[0-9]{10,12}$"
      },
      "_step3": {
        "title": "Step 3: Device Selection (Optional)",
        "type": "string",
        "default": "",
        "description": "If you have multiple Fermax monitors, specify which one to use. Leave blank to use the first available device.",
        "readonly": true
      },
      "name": {
        "title": "Accessory Name in HomeKit",
        "type": "string",
        "default": "Fermax Doorbell",
        "description": "The name that will appear in your Apple Home app for this doorbell.",
        "placeholder": "Fermax Doorbell"
      },
      "deviceId": {
        "title": "Device ID (Optional)",
        "type": "string",
        "description": "If you have multiple Fermax monitors, enter the specific deviceId here. You can find this in the Fermax Blue app or by checking the plugin logs after first run.",
        "placeholder": "e6e9df9010ab"
      },
      "deviceTag": {
        "title": "Device Tag (Optional)",
        "type": "string",
        "description": "Alternative: specify the human-readable tag/name of your monitor instead of deviceId.",
        "placeholder": "Front Door"
      },
      "accessDoorKey": {
        "title": "Door Key (Optional)",
        "type": "string",
        "description": "If your monitor controls multiple doors, specify the key (usually 'ZERO', 'ONE', etc.). Leave blank to use the first available door.",
        "placeholder": "ZERO"
      },
      "doorIndex": {
        "title": "Door Index (Optional)",
        "type": "integer",
        "default": 0,
        "description": "Fallback: use this numeric index if you don't know the door key. 0 = first door, 1 = second door, etc.",
        "minimum": 0,
        "maximum": 10
      },
      "_step4": {
        "title": "Step 4: Video Streaming (Optional but Recommended)",
        "type": "string",
        "default": "",
        "description": "Configure live video streaming for your doorbell. Without this, you'll only get snapshots in notifications.",
        "readonly": true
      },
      "cameraStreamUrl": {
        "title": "Camera Stream URL",
        "type": "string",
        "description": "FFmpeg-compatible video source. Options:\n1. RTSP: rtsp://your-monitor-ip:554/live/ch00_0\n2. HLS: https://fermax-stream-url/playlist.m3u8?token=...\n3. See README for extracting Fermax cloud stream URLs from push notifications.",
        "placeholder": "rtsp://192.168.1.100:554/live/ch00_0"
      },
      "cameraSnapshotUrl": {
        "title": "Snapshot URL (Optional)",
        "type": "string",
        "description": "HTTP endpoint that returns a JPEG image for HomeKit snapshots. If not provided, the plugin will use Fermax's photocaller API (requires 'Photocaller' enabled in Fermax app).",
        "placeholder": "https://your-camera/snapshot.jpg"
      },
      "cameraForceTranscode": {
        "title": "Force Video Transcoding",
        "type": "boolean",
        "default": false,
        "description": "Enable this if your stream uses HLS or other formats that need re-encoding. For RTSP streams with H.264, you can usually leave this disabled."
      },
      "cameraStreamOptions": {
        "title": "Extra FFmpeg Options (Advanced)",
        "type": "string",
        "description": "Additional FFmpeg input arguments. For RTSP streams, try: -rtsp_transport tcp",
        "placeholder": "-rtsp_transport tcp"
      },
      "cameraMaxBitrate": {
        "title": "Maximum Video Bitrate (kbps)",
        "type": "integer",
        "default": 2000,
        "description": "Limit video bitrate to reduce bandwidth usage. Default: 2000 kbps (2 Mbps).",
        "minimum": 500,
        "maximum": 10000
      },
      "_step5": {
        "title": "Step 5: Advanced Settings (Optional)",
        "type": "string",
        "default": "",
        "description": "Fine-tune plugin behavior. Most users can skip these settings.",
        "readonly": true
      },
      "unlockResetSeconds": {
        "title": "Lock Reset Timeout (seconds)",
        "type": "integer",
        "default": 8,
        "description": "After unlocking the door, how many seconds before the lock state resets to 'locked' in HomeKit. Default: 8 seconds.",
        "minimum": 1,
        "maximum": 60
      },
      "ffmpegPath": {
        "title": "FFmpeg Binary Path (Advanced)",
        "type": "string",
        "description": "Override the auto-detected FFmpeg path. Only needed if FFmpeg is installed in a non-standard location.",
        "placeholder": "/usr/bin/ffmpeg"
      },
      "cameraDebug": {
        "title": "Enable Debug Logging",
        "type": "boolean",
        "default": false,
        "description": "Enable verbose FFmpeg logging for troubleshooting video streaming issues. This will generate a lot of log output."
      },
      "clientId": {
        "title": "Custom OAuth Client ID (Advanced)",
        "type": "string",
        "description": "Only needed if Fermax changes their OAuth credentials. Leave blank to use the default.",
        "placeholder": "Leave blank unless instructed"
      },
      "clientSecret": {
        "title": "Custom OAuth Client Secret (Advanced)",
        "type": "string",
        "description": "Only needed if Fermax changes their OAuth credentials. Leave blank to use the default.",
        "format": "password",
        "placeholder": "Leave blank unless instructed"
      }
    },
    "required": ["username", "password", "senderId"]
  }
}

